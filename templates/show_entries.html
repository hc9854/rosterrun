{% extends "layout.html" %}
{% block body %}
  {% if session.logged_in %}
    <h1 class="page-header">Roster</h1>
    <form action="{{ url_for('show_entries') }}" method=post class=run-calculation>
      <dl>
        <dt>Google Document:
        <dd><input type=text name=gdocname placeholder="Quest Status">
        <dd><input type=submit name=action value=Import>
        <input type=submit name=action value=Calculate>
        <input type=submit name=action value=Refresh>
        <input type=submit name=action value=Reset>
      </dl>
    </form>
    <h2 class="sub-header">Character Status</h2>
    <div class="table-responsive">
    <table action="{{ url_for('update_chars') }}" method=post class="table table-striped character">
    <tr>
    <th>Manage</th>
    <th>Class</th>
    <th>Name</th>
    <th>Role</th>
    <th>Last Run</th>
    <th>Player Name</th>
    <th>Online?</th>
    </tr>
    {% for char in characters %}
      <tr>
      <td><input type=submit name=action value=Drop><input type=submit name=action value=Edit>
      <td><h2>{{ char.Class|safe }}</h2></td>
      <td>{{ char.Name|safe }}</td>
      <td>{{ char.Role|safe}}</td>
      <td>{{ char.LastRun|safe }}</td>
      <td>{{ char.PlayerName|safe }}</td>
      <td>{{ char.Present|safe }}</td>
    {% endfor %}
    </table>
    <form action="{{ url_for('add_character') }}" method=post>
      <h2>Character</h2>
      <dd>Class: <input type=text name=charclass placeholder="High Wizard">
      <dd>Name: <input type=text name=charname placeholder="Billdalf">
      <dd>Quests: <input type=text name=charquests placeholder="twotribes">
      <dd>Last Run: <input type=text name=charlastrun placeholder="2/9/2014">
      <dd>Player Name: <input type=text name=charplayername placeholder="Billy">
      <dd>Present: <input type=text name=charpresent placeholder="1">
      <input type=submit name=action value=Add></>
    </form>
    <h2 class="sub-header">Party Combinations</h2>
    <table class="table table-striped combination">
    <tr>
    <th>Party Combination</th>
    <th>Player Name</th>
    <th>Character Name</th>
    <th>Class</th>
    <th>Role</th>
    </tr>
    {% for entry in combinations %}
      <tr>
      <td><h2>{{ entry.InstanceName }} {{ entry.PartyIndex|safe }}</h2></td>
      <td>{{ entry.PlayerName|safe }}</td>
      <td>{{ entry.CharacterName|safe }}</td>
      <td>{{ entry.CharacterClass|safe }}</td>
      <td>{{ entry.RoleName|safe }}</td>
      </tr>
    {% else %}
      <li><em>Unbelievable.  No combinations here so far</em>
    {% endfor %}
    </table>
    </div>
  {% endif %}
{% endblock %}