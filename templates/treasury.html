{% extends "layout.html" %}
{% block body %}
  {% if session.logged_in %}
    <h1 class="page-header">Treasury</h1>
    <form action="{{ url_for('modify_treasury') }}" method=post class=modify-treasury>
    <div class="table-responsive">
    <table class="table table-striped treasure">
    <tr>
    <th>Action</th>
    <th>Itemid</th>
    <th>Name</th>
    <th>Cards</th>
    <th>Amount</th>
    <th>Unit Min Market Price</th>
    <th>Unit Max Market Price</th>
    <th>Unit Median Market Price</th>
    <th>Refresh Date</th>
    <th>Guild Transaction</th>
    </tr>
    {% for t in treasures %}
      <tr>
      <td><dd><input type=submit class="btn btn-default" name=action value="{{ t.id }}">Delete</input><dd><input type=submit class="btn btn-default" name=action value="{{ t.id }}">Edit</input>{% if t.guildtransaction_id is defined %} <dd>{{ t.guildtransaction_id|safe }} {% else %} <dd><input type=submit class="btn btn-primary" name=action value="{{ t.id }}">Buy</input> {% endif %}</td>
      <td>{{ t.itemid}}</td>
      <td>{{ t.name }}</td>
      <td>
      {% for c in t.cards %}
        <li>{{ c }}
      {% endfor %}
      </td>
      <td>{{ "{:,.0f}".format(t.amount)|safe }}</td>
      <td>{{ "{:,.0f}".format(t.minMarketPrice)|safe }}</td>
      <td>{{ "{:,.0f}".format(t.maxMarketPrice)|safe }}</td>
      <td>{{ "{:,.0f}".format(t.medianMarketPrice)|safe }}</td>
      <td>{{ t.refreshDate|safe }}</td>
      <td>{% if t.guildtransaction_id is defined %}{{ t.guildtransaction_id|safe }} {% else %} {% endif %}</td>
    {% endfor %}
    </table>
    </div>
    </form>
    <form action="{{ url_for('save_treasure') }}" method=post>
	  <h2 class="sub-header">Add Item</h2>
	  <dd>Item Id:<input type=text name=nitemid placeholder="1560" value="{{ edittreasure.itemid }}">
	  <dd>Item Name:<input type=text name=nitemname placeholder="Sage's Diary [2]" value="{{ edittreasure.name }}">
	  <dd>Cards:<input type=text name=nitemname placeholder="Doppelganger Card, Turtle General Card" value="{{ edittreasure.cards }}">
	  <dd>Amount:<input type=text name=nitemamount placeholder="1" value="{{ edittreasure.amount }}">
	  <dd>Suggested Min Price:<input type=text name=nitemminprice placeholder="1" value="{{ edittreasure.minMarketPrice }}">
      <dd>Suggested Max Price:<input type=text name=nitemmaxprice placeholder="1" value="{{ edittreasure.maxMarketPrice }}">
	  <dd>Suggested Median Price:<input type=text name=nitemmedianprice placeholder="1" value="{{ edittreasure.medianMarketPrice }}">
	  <input type=submit class="btn btn-primary" name=action value="Save"></input>
    </form>
  {% endif %}
{% endblock %}